const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthorizationModal-zgbmz4Kp.js","assets/index-DyGQLjSB.js","assets/vue-vendor-B4onvSGr.js","assets/utils-_oi8IqBs.js","assets/utils-BWm1wYfN.css","assets/index-Blxaxydx.css","assets/AuthorizationModal-BiYznelC.css"])))=>i.map(i=>d[i]);
import{_ as w}from"./index-DyGQLjSB.js";import{_ as g}from"./utils-_oi8IqBs.js";import{c as u,o as i,d as a,i as d,e as h,b as c,t as n,n as y,k as S,T as z,F as f,a as m}from"./vue-vendor-B4onvSGr.js";const k={name:"ShiftCountWindow",props:{people:{type:Array,required:!0},monthDays:{type:Array,required:!0}},data(){return{showSalaries:!1,showPasswordModal:!1,AuthorizationModal:null,salaryRates:{ratownik:70,nurse:107}}},async mounted(){this.calculateAllShiftCounts();try{const e=await w(()=>import("./AuthorizationModal-zgbmz4Kp.js"),__vite__mapDeps([0,1,2,3,4,5,6]));this.AuthorizationModal=e.default}catch(e){console.error("Failed to load AuthorizationModal:",e)}},methods:{countShiftsForPerson(e){if(!e)return 0;let t=0;for(let r=0;r<this.monthDays.length;r++)this.monthDays[r].dayShift1===e&&(t+=1),this.monthDays[r].dayShift2===e&&(t+=1),this.monthDays[r].nightShift1===e&&(t+=1),this.monthDays[r].nightShift2===e&&(t+=1);return t},calculateAllShiftCounts(){this.people.forEach(e=>{e.shiftCount=this.countShiftsForPerson(e.id)})},calculateBrutto(e,t){if(!this.showSalaries)return 0;let r=0;return t?r=e*12*this.salaryRates.ratownik:r=e*12*this.salaryRates.nurse,r},getTotalSalary(e){return this.people.filter(t=>t.ratownik===e).reduce((t,r)=>t+this.calculateBrutto(r.shiftCount||0,e),0)},formatCurrency(e){return new Intl.NumberFormat("pl-PL",{minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},toggleSalaryView(){this.showSalaries?this.showSalaries=!1:this.showPasswordModal=!0},handleSalaryAuthorization(){this.showSalaries=!0,this.showPasswordModal=!1}},watch:{monthDays:{handler(){this.calculateAllShiftCounts()},deep:!0}}},C={class:"columns-container"},_={class:"column"},A={class:"shift-counts"},p={key:0,class:"salary-info"},P={class:"column"},M={class:"shift-counts"},v={key:0,class:"salary-info"},x={key:0,class:"salary-summary"},D={class:"total-all"};function T(e,t,r,b,l,s){return i(),u("section",{class:y(["shift-counts-window",{"show-salaries":l.showSalaries}])},[t[6]||(t[6]=a("h3",{style:{margin:"8px"}},"Ilość zmian",-1)),a("button",{onClick:t[0]||(t[0]=(...o)=>s.toggleSalaryView&&s.toggleSalaryView(...o)),class:y(["salary-toggle-btn",{active:l.showSalaries}])},[t[2]||(t[2]=a("svg",{class:"dollar-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("rect",{x:"2",y:"7",width:"20",height:"10",rx:"2",stroke:"currentColor","stroke-width":"2"}),a("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"}),a("path",{d:"M12 10.5V13.5M10.5 12H13.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),c(" "+n(l.showSalaries?"Ukryj wynagrodzenia":"Pokaż wynagrodzenia"),1)],2),(i(),d(z,{to:"body"},[l.AuthorizationModal&&l.showPasswordModal?(i(),d(S(l.AuthorizationModal),{key:0,show:l.showPasswordModal,onClose:t[1]||(t[1]=o=>l.showPasswordModal=!1),onAuthorized:s.handleSalaryAuthorization,"aria-label":"Autoryzuj dostęp do wynagrodzeń",title:"Wprowadź hasło aby zobaczyć wynagrodzenia",mode:"salary"},null,40,["show","onAuthorized"])):h("",!0)])),a("div",C,[a("div",_,[t[3]||(t[3]=a("h4",{style:{margin:"8px"}},"Ratowniczki/cy",-1)),a("ul",A,[(i(!0),u(f,null,m(r.people.filter(o=>o.ratownik),o=>(i(),u("li",{key:o.id,class:"shift-count-item"},[c(n(o.name)+": ",1),a("strong",null,n(o.shiftCount||0),1),l.showSalaries?(i(),u("span",p," | "+n(s.formatCurrency(s.calculateBrutto(o.shiftCount||0,!0)))+" zł brutto ",1)):h("",!0)]))),128))])]),a("div",P,[t[4]||(t[4]=a("h4",{style:{margin:"8px"}},"Pielęgniarki/rze",-1)),a("ul",M,[(i(!0),u(f,null,m(r.people.filter(o=>!o.ratownik),o=>(i(),u("li",{key:o.id,class:"shift-count-item"},[c(n(o.name)+": ",1),a("strong",null,n(o.shiftCount||0),1),l.showSalaries?(i(),u("span",v," | "+n(s.formatCurrency(s.calculateBrutto(o.shiftCount||0,!1)))+" zł brutto ",1)):h("",!0)]))),128))])])]),l.showSalaries?(i(),u("div",x,[t[5]||(t[5]=a("h4",null,"Podsumowanie miesięczne:",-1)),a("p",null,[a("strong",null,"Ratownicy łącznie: "+n(s.formatCurrency(s.getTotalSalary(!0)))+" zł netto",1)]),a("p",null,[a("strong",null,"Pielęgniarki łącznie: "+n(s.formatCurrency(s.getTotalSalary(!1)))+" zł netto",1)]),a("p",D,[a("strong",null,"SUMA CAŁKOWITA: "+n(s.formatCurrency(s.getTotalSalary(!0)+s.getTotalSalary(!1)))+" zł netto",1)])])):h("",!0)],2)}const R=g(k,[["render",T],["__scopeId","data-v-00add189"]]);export{R as default};
