import{r as p,o as d,c as l,F as S,a as v,n as _,b as N,t as k,d as i}from"./vue-vendor-BNAjV1iG.js";const C=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s},c=p([]);let b=0;const u=(e,t="blue",s=3e3)=>{const o=b++;c.push({id:o,message:e,type:t}),setTimeout(()=>{m(o)},s)},m=e=>{const t=c.findIndex(s=>s.id===e);t!==-1&&c.splice(t,1)},x={name:"NotificationMessage",setup(){return{notifications:c,removeNotification:m}}},O={class:"notification-container"},w=["onClick"];function I(e,t,s,o,n,f){return d(),l("div",O,[(d(!0),l(S,null,v(o.notifications,a=>(d(),l("div",{key:a.id,class:_(["notification",a.type])},[N(k(a.message)+" ",1),i("button",{onClick:r=>o.removeNotification(a.id),"aria-label":"Close notification"},t[0]||(t[0]=[i("svg",{viewBox:"0 0 24 24",width:"14",height:"14",stroke:"currentColor","stroke-width":"2"},[i("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,w)],2))),128))])}const j=C(x,[["render",I],["__scopeId","data-v-5fd97d80"]]),B=Object.freeze(Object.defineProperty({__proto__:null,addNotification:u,default:j,removeNotification:m},Symbol.toStringTag,{value:"Module"}));async function T(){try{const e=await fetch("https://mc.kot.li/?key=shiftData.json",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw e.status===404&&u("Brak danych na serwerze","red"),new Error(`Failed to fetch data from server: ${e.status}`);return await e.json()}catch{return u("Nie udało się połączyć z serwerem","red"),null}}async function J(e){E();const t=await T();if(!t)return;const s={};for(const[o,n]of Object.entries(t)){const f=localStorage.getItem(o),a=f?JSON.parse(f):null,r={};if(!a)s[o]={...n},localStorage.setItem(o,JSON.stringify(n));else{for(const[g,y]of Object.entries(n)){const h=a[g]||null;h!==y&&(r[g]={from:h||"Empty",to:y||"Empty"})}Object.keys(r).length>0&&(s[o]=r),localStorage.setItem(o,JSON.stringify(n))}}return typeof e=="function"&&e(),sessionStorage.setItem("syncedChanges",JSON.stringify(s)),setTimeout(()=>{sessionStorage.removeItem("syncedChanges")},5e3),s}function E(){const e=sessionStorage.getItem("syncedChanges");if(e){const t=JSON.parse(e);return setTimeout(()=>{sessionStorage.removeItem("syncedChanges")},5e3),t}return{}}export{j as N,C as _,u as a,B as b,J as c,E as r};
