const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exceljs.min-rgIH9GXZ.js","assets/_commonjsHelpers-Cpj98o6Y.js","assets/PeopleListWindow-D-HUcl3e.js","assets/utils-DxxLyD3D.js","assets/vue-vendor-C8we75Ce.js","assets/utils-B5GXmokV.css","assets/PeopleListWindow-m_iyuCmo.css","assets/ShiftCountWindow-CMM01na6.js","assets/ShiftCountWindow-DAQXoi7E.css","assets/AuthorizationModal-NYyplEnh.js","assets/AuthorizationModal-DYt_pft6.css","assets/CalendarComponent-D_y1bljX.js","assets/scrollUtils-DTcQkS6G.js","assets/CalendarComponent-BMcQUGMV.css","assets/ExcelComponent--iDZsvLo.js","assets/ExcelComponent-CplihvyB.css"])))=>i.map(i=>d[i]);
import{e as j,c as g,o as f,d as a,b as T,t as v,f as N,g as _,n as x,w as B,F as O,a as U,h as C,i as D,m as Q,j as F,k as L,l as V,p as W,q as ee,v as H,s as G,u as te}from"./vue-vendor-C8we75Ce.js";import{M,_ as P,a as y,c as ne}from"./utils-DxxLyD3D.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const oe="modulepreload",se=function(e){return"/"+e},Y={},b=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=i(n.map(h=>{if(h=se(h),h in Y)return;Y[h]=!0;const p=h.endsWith(".css"),E=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const c=document.createElement("link");if(c.rel=p?"stylesheet":oe,p||(c.as="script"),c.crossOrigin="",c.href=h,u&&c.setAttribute("nonce",u),document.head.appendChild(c),p)return new Promise((k,d)=>{c.addEventListener("load",k),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},ie=j({name:"ButtonSwitchView",props:{currentComponent:{type:String,required:!0,validator:e=>["CalendarComponent","ExcelComponent"].includes(e)}},data(){return{MESSAGES:M}}}),ae=["title","aria-label"],re=["title","aria-label"];function le(e,t,n,r,s,o){return e.currentComponent==="ExcelComponent"?(f(),g("button",{key:0,onClick:t[0]||(t[0]=i=>e.$emit("navigate","CalendarComponent")),class:"switch-view-button",title:e.MESSAGES.VIEW_SWITCH_TO_CALENDAR,"aria-label":e.MESSAGES.VIEW_SWITCH_TO_CALENDAR},[t[2]||(t[2]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor","stroke-width":"3"},[a("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),a("line",{x1:"9",y1:"4",x2:"9",y2:"22"})],-1)),T(" "+v(e.MESSAGES.VIEW_CALENDAR_TEXT),1)],8,ae)):(f(),g("button",{key:1,onClick:t[1]||(t[1]=i=>e.$emit("navigate","ExcelComponent")),class:"switch-view-button",title:e.MESSAGES.VIEW_SWITCH_TO_TABLE,"aria-label":e.MESSAGES.VIEW_SWITCH_TO_TABLE},[t[3]||(t[3]=N('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="3" data-v-a1b10303><rect x="3" y="3" width="18" height="18" rx="2" data-v-a1b10303></rect><line x1="3" y1="9" x2="21" y2="9" data-v-a1b10303></line><line x1="3" y1="15" x2="21" y2="15" data-v-a1b10303></line><line x1="9" y1="3" x2="9" y2="21" data-v-a1b10303></line><line x1="15" y1="3" x2="15" y2="21" data-v-a1b10303></line></svg>',1)),T(" "+v(e.MESSAGES.VIEW_TABLE_TEXT),1)],8,re))}const X=P(ie,[["render",le],["__scopeId","data-v-a1b10303"]]),de={name:"PencilIcon",props:{isEditing:{type:Boolean,required:!0}}},he=["aria-checked"],ce={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"pencil-icon"},ue={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"pencil-icon"};function pe(e,t,n,r,s,o){return f(),g("span",{class:"slider",role:"switch","aria-checked":n.isEditing},[n.isEditing?(f(),g("svg",ue,t[1]||(t[1]=[a("path",{d:"M12 20h9"},null,-1),a("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},null,-1)]))):(f(),g("svg",ce,t[0]||(t[0]=[a("path",{d:"M12 20h9"},null,-1),a("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},null,-1)])))],8,he)}const K=P(de,[["render",pe]]),fe={},me={class:"refresh-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"};function ge(e,t){return f(),g("svg",me,t[0]||(t[0]=[a("path",{d:"M23 4v6h-6"},null,-1),a("path",{d:"M1 20v-6h6"},null,-1),a("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"},null,-1),a("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"},null,-1)]))}const q=P(fe,[["render",ge],["__scopeId","data-v-11885e2d"]]);function Ee(e){const t=[{date:new Date(e,0,1),name:"Nowy Rok"},{date:new Date(e,0,6),name:"Święto Trzech Króli"},{date:new Date(e,4,1),name:"Święto Pracy"},{date:new Date(e,4,3),name:"Święto Konstytucji 3 Maja"},{date:new Date(e,7,15),name:"Wniebowzięcie Najświętszej Maryi Panny"},{date:new Date(e,10,1),name:"Wszystkich Świętych"},{date:new Date(e,10,11),name:"Święto Niepodległości"},{date:new Date(e,11,25),name:"Boże Narodzenie (pierwszy dzień)"},{date:new Date(e,11,26),name:"Boże Narodzenie (drugi dzień)"}],n=we(e);t.push({date:n,name:"Wielkanoc"});const r=new Date(n);r.setDate(n.getDate()+1),t.push({date:r,name:"Poniedziałek Wielkanocny"});const s=new Date(n);s.setDate(n.getDate()+49),t.push({date:s,name:"Zielone Świątki"});const o=new Date(n);return o.setDate(n.getDate()+60),t.push({date:o,name:"Boże Ciało"}),t}function we(e){const t=e%19,n=Math.floor(e/100),r=e%100,s=Math.floor(n/4),o=n%4,i=Math.floor((n+8)/25),l=Math.floor((n-i+1)/3),u=(19*t+n-s-l+15)%30,h=Math.floor(r/4),p=r%4,E=(32+2*o+2*h-u-p)%7,c=Math.floor((t+11*u+22*E)/451),k=Math.floor((u+E-7*c+114)/31)-1,d=(u+E-7*c+114)%31+1;return new Date(e,k,d)}function A(e){const t=Ee(e.getFullYear()),n=e.toDateString();for(const r of t)if(r.date.toDateString()===n)return{isHoliday:!0,name:r.name};return{isHoliday:!1}}const ye=e=>["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"][e],Se=e=>{let t=e,n="",r;for(;t>0;)r=(t-1)%26,n=String.fromCharCode(65+r)+n,t=Math.floor((t-r)/26);return n},Me=(e,t,n=`
`)=>{const r=t.toDateString(),s=sessionStorage.getItem(r);if(s){const o=JSON.parse(s),i=[];return(o?.dayShift1===e||o?.dayShift2===e)&&i.push("D"),(o?.nightShift1===e||o?.nightShift2===e)&&i.push("N"),i.join(n)}return""},Ce=e=>{const t=e.getDay();return t===0||t===6?!0:A(e).isHoliday},ve=(e,t)=>{const n=document.createElement("a"),r=URL.createObjectURL(e);n.setAttribute("href",r),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},be=e=>{let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)},De={name:"ButtonExport",props:{people:{type:Array,required:!0},monthDays:{type:Array,required:!0},selectedMonth:{type:Number,required:!0},selectedYear:{type:Number,required:!0},currentPage:{type:String,default:"ExcelComponent"}},data(){return{showExportMenu:!1,isMobileView:!1,MESSAGES:M}},mounted(){document.addEventListener("click",this.handleOutsideClick),this.checkMobileView(),window.addEventListener("resize",this.checkMobileView)},beforeUnmount(){document.removeEventListener("click",this.handleOutsideClick),window.removeEventListener("resize",this.checkMobileView)},methods:{toggleExportMenu(e){e.stopPropagation(),this.showExportMenu=!this.showExportMenu},handleOutsideClick(e){this.showExportMenu&&!e.target.closest(".export-container")&&(this.showExportMenu=!1)},getMonthName(){return ye(this.selectedMonth)},getFilename(e){return`${this.MESSAGES.EXPORT_FILENAME_PREFIX}${this.getMonthName()}_${this.selectedYear}.${e}`},exportToCsv(){let e="\uFEFF";e+="Imię";for(let n=1;n<=this.getDaysInMonth();n++)e+=`;${n}`;e+=`\r
`;for(const n of this.people){e+=`"${n.name}"`;for(let r=1;r<=this.getDaysInMonth();r++)e+=`;${this.getFormattedShift(n.id,r," ")||""}`;e+=`\r
`}const t=new Blob([e],{type:"text/csv;charset=utf-8"});ve(t,this.getFilename("csv")),this.showExportMenu=!1},async exportToPdf(){try{const{jsPDF:e}=await b(async()=>{const{jsPDF:d}=await import("./jspdf.es.min-mahMP9sd.js").then(m=>m.j);return{jsPDF:d}},[]),{autoTable:t}=await b(async()=>{const{autoTable:d}=await import("./jspdf.plugin.autotable-BgrBGiiK.js");return{autoTable:d}},[]),n=new e({orientation:"landscape",unit:"mm",format:"a4"});try{const d=await fetch("/assets/fonts/IBMPlexMono-Regular.ttf");if(!d.ok)throw new Error("Font file not found");const m=await d.arrayBuffer();n.addFileToVFS("IBMPlexMono-Regular.ttf",be(m)),n.addFont("IBMPlexMono-Regular.ttf","IBMPlexMono","normal"),n.setFont("IBMPlexMono")}catch(d){console.warn("Could not load local font, using fallback",d),n.setFont("helvetica")}let r=n.internal.pageSize.getWidth();n.setFontSize(16),n.setTextColor(0,0,0);const s="IZBA PRZYJĘĆ DZIECIĘCA",o=n.getStringUnitWidth(s)*n.getFontSize()/n.internal.scaleFactor;n.text(s,(r-o)/2,15);const l="ROZKŁAD PRACY PRACOWNIKÓW KONTRAKTOWYCH - {0} {1}r.".replace("{0}",this.getMonthName()).replace("{1}",this.selectedYear),u=n.getStringUnitWidth(l)*n.getFontSize()/n.internal.scaleFactor;n.text(l,(r-u)/2,22);const h=["Imię"];for(let d=1;d<=this.getDaysInMonth();d++)h.push(d.toString());const p=this.people.map(d=>{const m=[d.name];for(let w=1;w<=this.getDaysInMonth();w++){const S=this.getFormattedShift(d.id,w,`
`);m.push(S||"")}return m});t(n,{head:[h],body:p,startY:30,theme:"grid",margin:{left:8},styles:{fontSize:8,cellPadding:3,font:"IBMPlexMono",fontStyle:"normal",lineWidth:.3,minCellHeight:8,halign:"center",cellWidth:"wrap",overflow:"linebreak"},columnStyles:{0:{cellWidth:24}},headStyles:{fillColor:[0,62,62],textColor:[255,255,255],fontSize:6},didParseCell:function(d){try{if(d.section==="head"&&d.row.index===0&&d.column.index>0){const m=parseInt(d.cell.raw.toString());if(!isNaN(m)){const w=new Date(this.selectedYear,this.selectedMonth,m),S=w.getDay(),I=S===6,R=S===0;A(w).isHoliday?(d.cell.styles.fillColor=[255,255,255],d.cell.styles.textColor=[204,0,0]):I?(d.cell.styles.fillColor=[0,153,0],d.cell.styles.textColor=[255,255,255]):R&&(d.cell.styles.fillColor=[204,0,0],d.cell.styles.textColor=[255,255,255])}}else if(d.section==="body"&&(d.row.index%2===1?d.cell.styles.fillColor=[240,240,240]:d.cell.styles.fillColor=[255,255,255],d.column.index>0)){const m=parseInt(d.cell.raw.toString());if(!isNaN(m)){const w=new Date(this.selectedYear,this.selectedMonth,m),S=w.getDay(),I=S===6,R=S===0;A(w).isHoliday?d.cell.styles.fillColor=[255,238,238]:(I||R)&&(d.cell.styles.fillColor=[235,235,235])}}}catch(m){console.error("Error in didParseCell:",m)}}.bind(this),didDrawCell:function(d){try{if(d.section==="head"&&d.row.index===0&&d.column.index>0){const m=parseInt(d.cell.raw.toString());if(!isNaN(m)){const w=new Date(this.selectedYear,this.selectedMonth,m);if(A(w).isHoliday){const{x:I,y:R,width:z}=d.cell;n.setFontSize(6),n.setTextColor(204,0,0),n.text("*",I+z-3,R+3),n.setFontSize(8),n.setTextColor(0,0,0)}}}}catch(m){console.error("Error in didDrawCell:",m)}}.bind(this)});const c=(n.lastAutoTable.finalY||150)+10;n.setFontSize(10),n.setTextColor(0,0,0),n.text(this.MESSAGES.EXPORT_LEGEND,14,c),n.text(this.MESSAGES.EXPORT_LEGEND_DAY_SHIFT,14,c+6),n.text(this.MESSAGES.EXPORT_LEGEND_NIGHT_SHIFT,14,c+12),n.text(this.MESSAGES.EXPORT_LEGEND_FULL_DAY_SHIFT,14,c+18);const k=[];for(let d=1;d<=this.getDaysInMonth();d++){const m=new Date(this.selectedYear,this.selectedMonth,d),w=A(m);w.isHoliday&&k.push({date:m,name:w.name})}k.length!=0&&(n.text(this.MESSAGES.EXPORT_HOLIDAYS_THIS_MONTH,14,c+28),k.forEach((d,m)=>{n.text(`${d.date.getDate()} - ${d.name}`,14,c+34+m*6)})),n.save(this.getFilename("pdf")),this.showExportMenu=!1,y(this.MESSAGES.EXPORT_PDF_SUCCESS,"green")}catch(e){console.error("Error exporting PDF:",e),y(this.MESSAGES.EXPORT_PDF_ERROR,"red")}},async exportToExcel(){try{const e=await b(()=>import("./exceljs.min-rgIH9GXZ.js").then(l=>l.e),__vite__mapDeps([0,1])),t=new e.Workbook,n=t.addWorksheet(`${this.getMonthName()} ${this.selectedYear}`),r=["Imię"];for(let l=1;l<=this.getDaysInMonth();l++)r.push(l.toString());n.addRow(r);const s=n.getRow(1).eachCell(l=>{l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"003E3E"}},l.font={color:{argb:"FFFFFF"},bold:!0},l.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});this.people.forEach((l,u)=>{const h=[l.name];for(let E=1;E<=this.getDaysInMonth();E++)h.push(this.getFormattedShift(l.id,E," "));n.addRow(h);const p=u+2;p%2===0&&n.getRow(p).eachCell(E=>{E.fill={type:"pattern",pattern:"solid",fgColor:{argb:"F0F0F0"}}})});for(let l=1;l<=this.getDaysInMonth();l++){const u=new Date(this.selectedYear,this.selectedMonth,l),{isHoliday:h,name:p}=A(u),E=u.getDay(),c=E===6,k=E===0;if(c||k||h){const m=Se(l+1);for(let S=2;S<=this.people.length+1;S++){const I=n.getCell(`${m}${S}`);I.fill={type:"pattern",pattern:"solid",fgColor:{argb:h?"FFEEEE":"EEEEEE"}}}const w=n.getCell(`${m}1`);if(h){w.note=p;const S=w.value?.toString()||"";w.value=S+this.MESSAGES.EXPORT_EXCEL_HOLIDAY_INDICATOR,w.font={color:{argb:"FFCC0000"},bold:!0}}else c?(w.fill={type:"pattern",pattern:"solid",fgColor:{argb:"009900"}},w.font={color:{argb:"FFFFFF"},bold:!0}):k&&(w.fill={type:"pattern",pattern:"solid",fgColor:{argb:"CC0000"}},w.font={color:{argb:"FFFFFF"},bold:!0})}}n.columns.forEach(l=>{l.width=12}),n.getColumn(1).width=20,n.getColumn(1).alignment={horizontal:"left"};const o=await t.xlsx.writeBuffer(),i=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.downloadFile(i,this.getFilename("xlsx")),this.showExportMenu=!1,y(this.MESSAGES.EXPORT_EXCEL_SUCCESS,"green")}catch(e){console.error("Error exporting Excel:",e),y(this.MESSAGES.EXPORT_EXCEL_ERROR,"red")}},downloadFile(e,t){const n=document.createElement("a"),r=URL.createObjectURL(e);n.setAttribute("href",r),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},getDaysInMonth(){return new Date(this.selectedYear,this.selectedMonth+1,0).getDate()},getFormattedShift(e,t,n=`
`){const r=new Date(this.selectedYear,this.selectedMonth,t);return Me(e,r,n)},isWeekendOrHoliday(e){const t=new Date(this.selectedYear,this.selectedMonth,e);return Ce(t)},checkMobileView(){this.isMobileView=window.innerWidth<=768}}},_e={class:"export-container"},ke=["title","aria-label"];function Pe(e,t,n,r,s,o){return f(),g("div",_e,[a("button",{class:x(["export-button top-right-buttons",{"excel-position":n.currentPage==="ExcelComponent","calendar-position":n.currentPage==="CalendarComponent"}]),onClick:t[0]||(t[0]=(...i)=>o.toggleExportMenu&&o.toggleExportMenu(...i)),title:s.MESSAGES.EXPORT_SCHEDULE_TITLE,"aria-label":s.MESSAGES.EXPORT_SCHEDULE_ARIA},t[4]||(t[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"export-icon"},[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"7 10 12 15 17 10"}),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)]),10,ke),s.showExportMenu?(f(),g("div",{key:0,class:x(["export-menu",[{"excel-position":n.currentPage==="ExcelComponent","calendar-position":n.currentPage==="CalendarComponent"},{"mobile-excel":n.currentPage==="ExcelComponent"&&s.isMobileView,"mobile-calendar":n.currentPage==="CalendarComponent"&&s.isMobileView}]])},[a("button",{onClick:t[1]||(t[1]=(...i)=>o.exportToCsv&&o.exportToCsv(...i)),class:"export-option"},[t[5]||(t[5]=N('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-ce1d9faf><path d="M14 3v4a1 1 0 0 0 1 1h4" data-v-ce1d9faf></path><path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z" data-v-ce1d9faf></path><path d="M9 17h6" data-v-ce1d9faf></path><path d="M9 13h6" data-v-ce1d9faf></path></svg>',1)),a("span",null,v(s.MESSAGES.EXPORT_FORMAT_CSV),1)]),a("button",{onClick:t[2]||(t[2]=(...i)=>o.exportToExcel&&o.exportToExcel(...i)),class:"export-option"},[t[6]||(t[6]=N('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="lightgreen" stroke-width="2" data-v-ce1d9faf><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-ce1d9faf></path><polyline points="14 2 14 8 20 8" data-v-ce1d9faf></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-ce1d9faf></line><line x1="16" y1="17" x2="8" y2="17" data-v-ce1d9faf></line><polyline points="10 9 9 9 8 9" data-v-ce1d9faf></polyline></svg>',1)),a("span",null,v(s.MESSAGES.EXPORT_FORMAT_EXCEL),1)]),a("button",{onClick:t[3]||(t[3]=(...i)=>o.exportToPdf&&o.exportToPdf(...i)),class:"export-option"},[t[7]||(t[7]=N('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="pink" stroke-width="2" data-v-ce1d9faf><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-ce1d9faf></path><polyline points="14 2 14 8 20 8" data-v-ce1d9faf></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-ce1d9faf></line><line x1="16" y1="17" x2="8" y2="17" data-v-ce1d9faf></line><polyline points="10 9 9 9 8 9" data-v-ce1d9faf></polyline></svg>',1)),a("span",null,v(s.MESSAGES.EXPORT_FORMAT_PDF),1)])],2)):_("",!0)])}const $=P(De,[["render",Pe],["__scopeId","data-v-ce1d9faf"]]),xe={name:"ButtonImport",props:{isEditingMode:{type:Boolean,required:!0},people:{type:Array,required:!0},monthDays:{type:Array,required:!0}},emits:["has-changes","cells-imported"],data(){return{showModal:!1,pastedData:"",parsedData:[],daysMismatch:!1,importedCells:new Set,isDragging:!1}},computed:{daysInMonth(){return this.monthDays.length}},mounted(){this.$nextTick(()=>{this.$refs.dropZone&&this.$refs.dropZone.focus()}),window.addEventListener("paste",this.handleGlobalPaste)},beforeUnmount(){window.removeEventListener("paste",this.handleGlobalPaste)},methods:{showImportModal(){this.showModal=!0,this.resetImport(),this.$nextTick(()=>{this.$refs.dropZone&&this.$refs.dropZone.focus()})},closeImportModal(){this.showModal=!1},resetImport(){this.pastedData="",this.parsedData=[],this.importedCells.clear()},triggerFileInput(){this.$refs.fileInput&&this.$refs.fileInput.click()},onDragOver(e){this.isDragging=!0,e.dataTransfer.dropEffect="copy"},onDragLeave(){this.isDragging=!1},onDrop(e){this.isDragging=!1;const t=e.dataTransfer.files;if(t.length>0)this.handleFileData(t[0]);else{const n=e.dataTransfer.getData("text/html");if(n)this.processHtmlTable(n);else{const r=e.dataTransfer.getData("text/plain");r&&(this.pastedData=r,this.parseImportedData())}}},onPaste(e){const t=e.clipboardData||window.clipboardData,n=t.getData("text/html");if(n){this.processHtmlTable(n);return}const r=t.getData("text/plain");r&&(this.pastedData=r,this.parseImportedData())},handleGlobalPaste(e){this.showModal&&this.onPaste(e)},processHtmlTable(e){try{const r=new DOMParser().parseFromString(e,"text/html").querySelectorAll("table");if(r.length>0){const o=r[0].querySelectorAll("tr");let i="";o.forEach(l=>{const u=l.querySelectorAll("th, td"),h=Array.from(u).map(p=>p.textContent.trim());i+=h.join("	")+`
`}),this.pastedData=i,this.parseImportedData()}}catch(t){console.error("Error processing HTML table:",t),y(M.IMPORT_TABLE_PROCESS_ERROR,"red")}},handleFileUpload(e){const t=e.target.files[0];t&&this.handleFileData(t)},handleFileData(e){e.type==="text/csv"||e.name.endsWith(".csv")?this.parseCSVFile(e):e.type.includes("spreadsheetml")||e.name.endsWith(".xlsx")||e.name.endsWith(".xls")?this.parseExcelFile(e):y(M.IMPORT_UNSUPPORTED_FILE_TYPE,"red")},parseCSVFile(e){const t=new FileReader;t.onload=n=>{this.pastedData=n.target.result,this.parseImportedData()},t.readAsText(e)},async parseExcelFile(e){try{const t=await b(()=>import("./exceljs.min-rgIH9GXZ.js").then(s=>s.e),__vite__mapDeps([0,1])),n=new t.Workbook,r=new FileReader;r.onload=async s=>{const o=s.target.result;await n.xlsx.load(o);const i=n.getWorksheet(1);let l="";i.eachRow((u,h)=>{const p=u.values.slice(1);l+=p.join(",")+`
`}),this.pastedData=l,this.parseImportedData()},r.readAsArrayBuffer(e)}catch(t){console.error("Error parsing Excel file:",t),y(M.IMPORT_EXCEL_PROCESS_ERROR,"red")}},parseImportedData(){if(!this.pastedData.trim()){this.parsedData=[];return}try{const e=this.pastedData.trim().split(/\r?\n/).filter(o=>o.trim());if(e.length<2){y(M.IMPORT_BAD_DATA_FORMAT,"orange");return}const t=o=>{const i=[];let l="",u=!1;for(let h=0;h<o.length;h++){const p=o[h];p==='"'?u&&h<o.length-1&&o[h+1]==='"'?(l+='"',h++):u=!u:(p===","||p==="	"||p===";")&&!u?(i.push(l.trim()),l=""):l+=p}return i.push(l.trim()),i},n=e.map(t),r=n[0].slice(1),s=n.slice(1);this.parsedData=s.map(o=>{const i=o[0].replace(/^"(.*)"$/,"$1"),l=o.slice(1).map(u=>{const h=u.replace(/^"(.*)"$/,"$1").toUpperCase().trim();return["D","N","D N","DN"].includes(h)?h==="DN"?"D N":h:""});return{name:i,shifts:l}}),this.parsedData=this.parsedData.filter(o=>o.name),this.daysMismatch=r.length!==this.monthDays.length}catch(e){console.error("Error parsing imported data:",e),y(M.IMPORT_DATA_PROCESS_ERROR,"red"),this.parsedData=[]}},confirmImport(){if(!this.parsedData.length)return;const e=new Set;this.parsedData.forEach(t=>{const n=this.people.find(r=>r.name.toLowerCase()===t.name.toLowerCase());if(!n){y(M.IMPORT_PERSON_NOT_FOUND.replace("${row.name}",t.name),"orange");return}t.shifts.forEach((r,s)=>{if(s<this.monthDays.length){const o=this.monthDays[s],i=o.date.toDateString();r&&(o.dayShift1===n.id&&(o.dayShift1=null),o.dayShift2===n.id&&(o.dayShift2=null),o.nightShift1===n.id&&(o.nightShift1=null),o.nightShift2===n.id&&(o.nightShift2=null),r.includes("D")&&(o.dayShift1?o.dayShift2||(o.dayShift2=n.id,o.dayShift2Name=n.name):(o.dayShift1=n.id,o.dayShift1Name=n.name)),r.includes("N")&&(o.nightShift1?o.nightShift2||(o.nightShift2=n.id,o.nightShift2Name=n.name):(o.nightShift1=n.id,o.nightShift1Name=n.name)),e.add(i),this.importedCells.add(`${n.id}-${o.date.getDate()}`))}})}),e.forEach(t=>{const n=this.monthDays.find(r=>r.date.toDateString()===t);if(n){const r={dayShift1:n.dayShift1,dayShift2:n.dayShift2,nightShift1:n.nightShift1,nightShift2:n.nightShift2};localStorage.setItem(t,JSON.stringify(r))}}),this.closeImportModal(),y(M.IMPORT_SUCCESS,"green"),this.$emit("has-changes",!0),this.$emit("cells-imported",Array.from(this.importedCells))}}},Ie=["disabled"],Te={key:0,class:"import-modal"},Ae={class:"import-modal-content"},Re={class:"import-modal-header"},Oe={class:"import-content"},Fe={key:0,class:"drop-zone-placeholder"},Le={key:0,class:"preview-section"},Ne={key:0,class:"warning-message"},ze={class:"preview-table-container"},Be={class:"preview-table"},Ue={class:"controls"},Ve={class:"modal-footer"},We=["disabled"];function He(e,t,n,r,s,o){return f(),g(O,null,[a("button",{class:"top-right-buttons import-button",onClick:t[0]||(t[0]=(...i)=>o.showImportModal&&o.showImportModal(...i)),disabled:!n.isEditingMode,title:"Importuj dane do CSV lub Excel","aria-label":"Importuj dane do CSV lub Excel"},t[11]||(t[11]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"22",height:"22",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 14v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5M12 3v12M7 8l5-5 5 5"})],-1)]),8,Ie),s.showModal?(f(),g("div",Te,[a("div",Ae,[a("div",Re,[t[12]||(t[12]=a("h3",null,"Importowanie Danych",-1)),a("button",{class:"close-button",onClick:t[1]||(t[1]=(...i)=>o.closeImportModal&&o.closeImportModal(...i))},"×")]),a("div",Oe,[a("div",{class:x(["drop-zone",{"drag-active":s.isDragging,"has-data":s.parsedData.length>0}]),onDragover:t[3]||(t[3]=B((...i)=>o.onDragOver&&o.onDragOver(...i),["prevent"])),onDragleave:t[4]||(t[4]=B((...i)=>o.onDragLeave&&o.onDragLeave(...i),["prevent"])),onDrop:t[5]||(t[5]=B((...i)=>o.onDrop&&o.onDrop(...i),["prevent"])),onPaste:t[6]||(t[6]=(...i)=>o.onPaste&&o.onPaste(...i)),onClick:t[7]||(t[7]=(...i)=>o.triggerFileInput&&o.triggerFileInput(...i)),tabindex:"0",ref:"dropZone"},[s.parsedData.length===0?(f(),g("div",Fe,t[13]||(t[13]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"gray","stroke-width":"2"},[a("path",{d:"M19 13v6a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-6M12 3v12M8 7l4-4 4 4"})],-1),a("p",null," Przeciągnij i upuść plik, wklej ze schowka, bądź kliknij aby wybrać plik ",-1),a("p",{class:"sub-text"}," Wspierane formaty: CSV, Excel ( xlsx, xls ) albo tabela ",-1)]))):_("",!0),a("input",{type:"file",ref:"fileInput",style:{display:"none"},onChange:t[2]||(t[2]=(...i)=>o.handleFileUpload&&o.handleFileUpload(...i)),accept:".csv,.xlsx,.xls"},null,544)],34),s.parsedData.length>0?(f(),g("div",Le,[t[15]||(t[15]=a("h4",null,"Podgląd importowanego miesiąca",-1)),s.daysMismatch?(f(),g("div",Ne," Uwaga: Importowany miesiąc ma "+v(s.parsedData[0].shifts.length)+" dni, a obecnie wybrany ma "+v(o.daysInMonth)+" dni. ",1)):_("",!0),a("div",ze,[a("table",Be,[a("thead",null,[a("tr",null,[t[14]||(t[14]=a("th",null,null,-1)),(f(!0),g(O,null,U(s.parsedData[0].shifts,(i,l)=>(f(),g("th",{key:`header-${l}`},v(l+1),1))),128))])]),a("tbody",null,[(f(!0),g(O,null,U(s.parsedData,(i,l)=>(f(),g("tr",{key:`row-${l}`},[a("td",null,v(i.name),1),(f(!0),g(O,null,U(i.shifts,(u,h)=>(f(),g("td",{key:`cell-${l}-${h}`,class:"imported-shift"},v(u),1))),128))]))),128))])])]),a("div",Ue,[a("button",{class:"reset-button",onClick:t[8]||(t[8]=(...i)=>o.resetImport&&o.resetImport(...i))},"Reset")])])):_("",!0),a("div",Ve,[a("button",{class:"cancel-button",onClick:t[9]||(t[9]=(...i)=>o.closeImportModal&&o.closeImportModal(...i))}," Anuluj "),a("button",{class:"import-confirm-button",onClick:t[10]||(t[10]=(...i)=>o.confirmImport&&o.confirmImport(...i)),disabled:!s.parsedData.length}," Importuj ",8,We)])])])])):_("",!0)],64)}const Z=P(xe,[["render",He],["__scopeId","data-v-9e39c2b0"]]),Ge={name:"MonthSelector",props:{currentMonth:{type:Number,required:!0},currentYear:{type:Number,required:!0},locale:{type:String,default:"pl"},hasUnsavedChanges:{type:Boolean,default:!1}},data(){return{isChanging:!1,MESSAGES:M}},computed:{formattedMonthYear(){return new Date(this.currentYear,this.currentMonth).toLocaleString(this.locale,{month:"long",year:"numeric"}).toUpperCase()}},mounted(){document.addEventListener("keydown",this.handleKeyDown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},methods:{handleKeyDown(e){const t=document.activeElement;if(!(t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)))switch(e.key){case"ArrowLeft":case"<":e.preventDefault(),this.handleMonthChange(-1);break;case"ArrowRight":case">":e.preventDefault(),this.handleMonthChange(1);break;case"PageUp":e.preventDefault(),this.handleMonthChange(-1);break;case"PageDown":e.preventDefault(),this.handleMonthChange(1);break;case"ArrowUp":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.handleMonthChange(12));break;case"ArrowDown":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.handleMonthChange(-12));break}},handleMonthChange(e){if(this.hasUnsavedChanges){if(!confirm(M.MONTH_CHANGE_UNSAVED))return;this.$emit("discard-changes")}this.isChanging=!0,setTimeout(()=>{this.isChanging=!1},300),this.$emit("change-month",e)}}},Ye={class:"monthChange"},je=["aria-label","title"],Xe=["aria-label","title"];function Ke(e,t,n,r,s,o){return f(),g("section",Ye,[a("button",{class:"buttonMonthChange prev-month",onClick:t[0]||(t[0]=i=>o.handleMonthChange(-1)),"aria-label":s.MESSAGES.MONTH_PREVIOUS,title:s.MESSAGES.MONTH_PREVIOUS_GO_TO}," ‹ ",8,je),a("span",{class:x({changing:s.isChanging}),role:"heading","aria-level":"2"},v(o.formattedMonthYear),3),a("button",{class:"buttonMonthChange next-month",onClick:t[1]||(t[1]=i=>o.handleMonthChange(1)),"aria-label":s.MESSAGES.MONTH_NEXT,title:s.MESSAGES.MONTH_NEXT_GO_TO}," › ",8,Xe)])}const J=P(Ge,[["render",Ke],["__scopeId","data-v-a5cabbbd"]]),qe=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),$e=j({name:"ButtonsTopBar",components:{ButtonSwitchView:X,PencilIcon:K,RefreshIcon:q,ButtonExport:$,ButtonImport:Z,MonthSelector:J},props:{canSave:Boolean,currentComponent:String,currentMonth:Number,currentYear:Number,locale:String,hasUnsavedChanges:Boolean,isEditingMode:Boolean,isRefreshing:Boolean,people:Array,monthDays:Array},data(){return{isMenuOpen:!1,isMobileView:!1,MESSAGES:M}},methods:{checkMobileView(){this.isMobileView=window.innerWidth<=768,this.isMobileView||(this.isMenuOpen=!1)}},mounted(){this.checkMobileView(),window.addEventListener("resize",this.checkMobileView)},beforeUnmount(){window.removeEventListener("resize",this.checkMobileView)}}),Ze={class:"buttons-top-bar"},Je={class:"fixed-buttons"},Qe=["aria-expanded"],et=["aria-label","title"],tt=["title"],nt=["checked","aria-label"];function ot(e,t,n,r,s,o){const i=C("MonthSelector"),l=C("ButtonSwitchView"),u=C("refresh-icon"),h=C("PencilIcon"),p=C("ButtonExport"),E=C("ButtonImport");return f(),g("nav",Ze,[a("div",Je,[e.isMobileView?(f(),g("button",{key:0,class:x(["hamburger-menu",{"is-open":e.isMenuOpen}]),onClick:t[0]||(t[0]=c=>e.isMenuOpen=!e.isMenuOpen),"aria-expanded":e.isMenuOpen,"aria-label":"Menu"},t[8]||(t[8]=[a("span",null,null,-1),a("span",null,null,-1),a("span",null,null,-1)]),10,Qe)):_("",!0),D(i,{currentMonth:e.currentMonth,currentYear:e.currentYear,locale:e.locale,hasUnsavedChanges:e.hasUnsavedChanges,onChangeMonth:t[1]||(t[1]=c=>e.$emit("change-month",c)),onDiscardChanges:t[2]||(t[2]=c=>e.$emit("discard-changes"))},null,8,["currentMonth","currentYear","locale","hasUnsavedChanges"])]),a("div",{class:x(["collapsible-buttons",{"menu-open":e.isMenuOpen&&e.isMobileView,"mobile-view":e.isMobileView,"desktop-view":!e.isMobileView}])},[D(l,{currentComponent:e.currentComponent,onNavigate:t[3]||(t[3]=c=>e.$emit("navigate",c))},null,8,["currentComponent"]),a("div",{class:x(["right-buttons",{"mobile-view":e.isMobileView}])},[a("button",{class:"top-right-buttons buttonRefresh",onClick:t[4]||(t[4]=c=>e.$emit("refresh")),"aria-label":e.MESSAGES.REFRESH,title:e.MESSAGES.REFRESH},[D(u,{class:x({refreshing:e.isRefreshing})},null,8,["class"])],8,et),a("label",{class:"top-right-buttons compact-toggle",title:e.MESSAGES.CLICK_TO_EDIT},[a("input",{type:"checkbox",checked:e.isEditingMode,onChange:t[5]||(t[5]=c=>e.$emit("toggle-edit",c.target.checked)),"aria-label":e.MESSAGES.CLICK_TO_EDIT},null,40,nt),D(h,{isEditing:e.isEditingMode},null,8,["isEditing"])],8,tt),D(p,Q(e.$attrs,{people:e.people,monthDays:e.monthDays,selectedMonth:e.currentMonth,selectedYear:e.currentYear,"current-page":e.currentComponent}),null,16,["people","monthDays","selectedMonth","selectedYear","current-page"]),D(E,{isEditingMode:e.isEditingMode,people:e.people,monthDays:e.monthDays,onHasChanges:t[6]||(t[6]=c=>e.$emit("has-changes",c)),onCellsImported:t[7]||(t[7]=c=>e.$emit("cells-imported",c))},null,8,["isEditingMode","people","monthDays"])],2)],2)])}const st=P($e,[["render",ot],["__scopeId","data-v-fa70f80f"]]),it={name:"SubmitButton",props:{canSave:{type:Boolean,required:!0}},emits:["save"],data(){return{MESSAGES:M}}},at=["disabled","aria-label","title"];function rt(e,t,n,r,s,o){return f(),g("button",{disabled:!n.canSave,onClick:t[0]||(t[0]=i=>e.$emit("save")),class:"submit-button","aria-label":s.MESSAGES.SAVE_CHANGES,title:s.MESSAGES.SAVE_CHANGES},v(s.MESSAGES.SAVE_BUTTON_TEXT),9,at)}const lt=P(it,[["render",rt],["__scopeId","data-v-5d1ce167"]]),dt={name:"VueCalendar",components:{ButtonsTopBar:st,ButtonSwitchView:X,SubmitButton:lt,MonthSelector:F(()=>b(()=>Promise.resolve().then(()=>qe),void 0)),PeopleListWindow:F(()=>b(()=>import("./PeopleListWindow-D-HUcl3e.js"),__vite__mapDeps([2,3,4,5,6]))),ShiftCountWindow:F(()=>b(()=>import("./ShiftCountWindow-CMM01na6.js"),__vite__mapDeps([7,3,4,5,8]))),NotificationMessage:F(()=>b(()=>import("./utils-DxxLyD3D.js").then(e=>e.b),__vite__mapDeps([3,4,5]))),RefreshIcon:q,ButtonExport:$,ButtonImport:Z,PencilIcon:K},data(){return{isLoading:!1,isEditingMode:this.safeGetFromStorage("isEditingMode",!1),selectedMonth:new Date().getMonth(),selectedYear:new Date().getFullYear(),locale:"pl",hasUnsavedChanges:!1,showPasswordModal:!1,localData:{},people:[{id:1,name:"Milena",ratownik:!1},{id:2,name:"Mikołaj",ratownik:!1},{id:3,name:"Aleksandra",ratownik:!1},{id:4,name:"Łukasz",ratownik:!0},{id:5,name:"Joanna",ratownik:!1},{id:6,name:"Natalia",ratownik:!0},{id:7,name:"Marcin",ratownik:!0}],monthDays:[],isRefreshing:!1,AuthorizationModal:null,CalendarComponent:null,ExcelComponent:null,currentPage:this.safeGetFromStorage("currentPage","ExcelComponent")}},computed:{canSave(){return this.hasUnsavedChanges},peopleListEditingMode(){return this.currentPage==="CalendarComponent"&&this.isEditingMode},activeComponentRef(){return this.currentPage==="CalendarComponent"?this.$refs.calendarComponent:this.$refs.excelComponent}},methods:{showPasswordPrompt(){if(this.AuthorizationModal){this.showPasswordModal=!0;return}b(()=>import("./AuthorizationModal-NYyplEnh.js"),__vite__mapDeps([9,3,4,5,10])).then(e=>{this.AuthorizationModal=G(e.default),this.showPasswordModal=!0})},handleAuthorization(){this.showPasswordModal=!1,this.hasUnsavedChanges=!1},loadPageComponent(e){const n={CalendarComponent:()=>b(()=>import("./CalendarComponent-D_y1bljX.js"),__vite__mapDeps([11,12,3,4,5,13])),ExcelComponent:()=>b(()=>import("./ExcelComponent--iDZsvLo.js"),__vite__mapDeps([14,12,3,4,5,15]))}[e];return!n||this[e]?Promise.resolve():(this.isLoading=!0,n().then(r=>{this[e]=G(r.default)}).finally(()=>{this.isLoading=!1}))},handleNavigation(e){this.hasUnsavedChanges&&!confirm("Masz niezapisane zmiany. Czy na pewno chcesz zmienić widok?")||(localStorage.setItem("currentPage",e),this.loadPageComponent(e).then(()=>{this.currentPage=e,this.hasUnsavedChanges=!1}))},handleMonthChange(e){const t=new Date(this.selectedYear,this.selectedMonth,1);t.setMonth(t.getMonth()+e),this.selectedMonth=t.getMonth(),this.selectedYear=t.getFullYear()},discardChanges(){this.hasUnsavedChanges=!1,this.checkShiftDataSync()},generateCurrentView(){this.currentPage==="CalendarComponent"&&this.$refs.calendarComponent&&this.$refs.calendarComponent.generateMonthDays()},async checkShiftDataSync(){const e=new Error("Sync timeout");this.isRefreshing=!0;try{await Promise.race([ne(()=>this.activeComponentRef?.generateMonthDays()),new Promise((t,n)=>setTimeout(()=>n(e),5e3))]),this.hasUnsavedChanges=!1}catch(t){console.error(t),y(`Błąd podczas odświeżania: ${t.message}`,"red")}finally{setTimeout(()=>this.isRefreshing=!1,800)}},updateEditingMode(e){this.isEditingMode=e,localStorage.setItem("isEditingMode",JSON.stringify(e))},updateUnsavedChanges(e){this.hasUnsavedChanges=e},emitEditingMode(e){this.updateEditingMode(e)},enableEditingMode(){this.isEditingMode=!0},updateMonthDays(e){this.monthDays=e},globalErrorHandler(){this.isRefreshing=!1,this.currentPage==="ExcelComponent"&&!this.$refs.excelComponent&&this.handleNavigation("ExcelComponent"),this.isLoading=!1},safeGetFromStorage(e,t){try{const n=localStorage.getItem(e);return n===null?t:e==="currentPage"?n:JSON.parse(n)}catch(n){return console.warn(`Error reading ${e} from localStorage:`,n),t}},handleImportedCells(e){if(!this.ExcelComponent){console.error("ExcelComponent is not loaded yet.");return}this.$refs.excelComponent.importedCells=new Set(e)}},async mounted(){try{this.isRefreshing=!1,await this.loadPageComponent("ExcelComponent").catch(t=>{console.error("Failed to load Excel component:",t),y("Błąd ładowania Tabeli","red")}),localStorage.getItem("currentPage")==="CalendarComponent"&&await this.loadPageComponent("CalendarComponent").catch(t=>{console.error("Failed to load Calendar component:",t),y("Błąd ładowania Kalendarza","red"),this.currentPage="ExcelComponent",localStorage.setItem("currentPage","ExcelComponent")}),this.discardChanges(),this.hasUnsavedChanges=!1}catch(e){console.error("Error during application initialization:",e),y("Błąd inicjalizacji aplikacji","red")}["error","unhandledrejection"].forEach(e=>window.addEventListener(e,()=>this.globalErrorHandler()))}},ht={class:"app-container"},ct={class:"main-content"},ut={key:0,class:"refresh-overlay"},pt={class:"editing-mode-container"},ft={class:"editing-mode-label"},mt={class:"editing-mode-label"};function gt(e,t,n,r,s,o){const i=C("SubmitButton"),l=C("ButtonsTopBar"),u=C("RefreshIcon"),h=C("PeopleListWindow"),p=C("ShiftCountWindow"),E=C("NotificationMessage");return f(),g(O,null,[a("div",ht,[s.AuthorizationModal&&s.showPasswordModal?(f(),L(V(s.AuthorizationModal),{key:0,show:s.showPasswordModal,onClose:t[0]||(t[0]=c=>s.showPasswordModal=!1),onAuthorized:o.handleAuthorization,"aria-label":"Zapisz zmiany",title:"Zapisz zmiany w harmonogramie",mode:"save"},null,40,["show","onAuthorized"])):_("",!0),D(i,{canSave:o.canSave,onSave:o.showPasswordPrompt},null,8,["canSave","onSave"]),D(l,{canSave:o.canSave,currentComponent:s.currentPage,currentMonth:s.selectedMonth,currentYear:s.selectedYear,locale:s.locale,hasUnsavedChanges:s.hasUnsavedChanges,isEditingMode:s.isEditingMode,isRefreshing:s.isRefreshing,people:s.people,monthDays:s.monthDays,onSave:o.showPasswordPrompt,onNavigate:o.handleNavigation,onChangeMonth:o.handleMonthChange,onDiscardChanges:o.discardChanges,onRefresh:o.checkShiftDataSync,onToggleEdit:o.emitEditingMode,onHasChanges:o.updateUnsavedChanges,onCellsImported:o.handleImportedCells},null,8,["canSave","currentComponent","currentMonth","currentYear","locale","hasUnsavedChanges","isEditingMode","isRefreshing","people","monthDays","onSave","onNavigate","onChangeMonth","onDiscardChanges","onRefresh","onToggleEdit","onHasChanges","onCellsImported"]),a("main",ct,[s.isRefreshing?(f(),g("div",ut,[D(u,{class:"centered-refresh-icon refreshing"})])):_("",!0),a("div",{class:"component-wrapper",style:ee({opacity:s.isRefreshing?"0.5":"1"})},[s.currentPage==="CalendarComponent"?(f(),L(V(s.CalendarComponent),{key:0,ref:"calendarComponent",isEditingMode:s.isEditingMode,selectedMonth:s.selectedMonth,selectedYear:s.selectedYear,people:s.people,onUpdateEditingMode:o.updateEditingMode,onHasChanges:o.updateUnsavedChanges,onMonthDaysUpdated:o.updateMonthDays},null,40,["isEditingMode","selectedMonth","selectedYear","people","onUpdateEditingMode","onHasChanges","onMonthDaysUpdated"])):_("",!0),s.currentPage==="ExcelComponent"?(f(),L(V(s.ExcelComponent),{key:1,ref:"excelComponent",isEditingMode:s.isEditingMode,selectedMonth:s.selectedMonth,selectedYear:s.selectedYear,people:s.people,onUpdateEditingMode:o.updateEditingMode,onHasChanges:o.updateUnsavedChanges,onMonthDaysUpdated:o.updateMonthDays},null,40,["isEditingMode","selectedMonth","selectedYear","people","onUpdateEditingMode","onHasChanges","onMonthDaysUpdated"])):_("",!0)],4),D(h,{people:s.people,isEditingMode:o.peopleListEditingMode},null,8,["people","isEditingMode"]),W(a("div",pt,[W(a("h1",ft,t[1]||(t[1]=[T(" Tryb edytowania "),a("a",{class:"editing-mode-status"},"Włączony",-1),a("br",null,null,-1),T(" Przeciągaj członków zespołu na miejsca w grafiku."),a("br",null,null,-1),T("Kliknij na zajętą zmianę, aby ją wyczyścić. ")]),512),[[H,s.currentPage==="CalendarComponent"]]),W(a("h1",mt,t[2]||(t[2]=[T(" Tryb edytowania "),a("a",{class:"editing-mode-status"},"Włączony",-1),a("br",null,null,-1),T(" Kliknij na miejsce w tabeli, aby wybrać zmianę. ")]),512),[[H,s.currentPage==="ExcelComponent"]])],512),[[H,s.isEditingMode]]),s.monthDays.length>0&&s.localData[1]!==null?(f(),L(p,{key:1,ref:"shiftCountWindow",people:s.people,monthDays:s.monthDays},null,8,["people","monthDays"])):_("",!0),D(E)])]),t[3]||(t[3]=a("footer",{class:"footer"},[a("a",{href:"https://github.com/puksh/kalendar"},"© 2025 puksh - All rights reserved")],-1))],64)}const Et=P(dt,[["render",gt],["__scopeId","data-v-e03b3328"]]);window.addEventListener("error",e=>{e.error&&(e.error.message.includes("Failed to fetch dynamically imported module")||e.error.message.includes("Importing a module script failed"))&&window.location.reload()});te(Et).mount("#app");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.log("Service Worker registration failed:",e)})});export{b as _,Me as g,A as i};
