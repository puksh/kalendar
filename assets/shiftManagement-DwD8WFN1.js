import{M as r,a as l}from"./utils-DxxLyD3D.js";const w=["Nd","Pon","Wt","Åšr","Czw","Pt","Sob"];function A(t){const n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}function k(t,n){const e=new Date(t,n+1,0).getDate(),i=[];for(let a=1;a<=e;a++)i.push({date:new Date(t,n,a),dayShift1:null,dayShift2:null,nightShift1:null,nightShift2:null,dayShift1Name:r.NOT_ASSIGNED,dayShift2Name:r.NOT_ASSIGNED,nightShift1Name:r.NOT_ASSIGNED,nightShift2Name:r.NOT_ASSIGNED,isCurrentMonth:!0});return i}function g(t,n){const e=n.find(i=>i.id===t);return e?{name:e.name,isRatownik:e.ratownik}:{name:r.NOT_ASSIGNED,isRatownik:!1}}const u=["dayShift1","dayShift2","nightShift1","nightShift2"];function O(t){const n=t.date.toDateString(),e={dayShift1:t.dayShift1,dayShift2:t.dayShift2,nightShift1:t.nightShift1,nightShift2:t.nightShift2};sessionStorage.setItem(n,JSON.stringify(e))}function d(t,n,e,i,a){const s=new Date(t,n,e).toDateString(),f=sessionStorage.getItem(s);if(f)try{const c=JSON.parse(f),S=i.find(o=>o.date.toDateString()===s);S&&u.forEach(o=>{S[o]=c[o];const h=g(S[o],a);S[o+"Name"]=h.name,S[o+"Ratownik"]=h.isRatownik,S[o+"UserChanged"]=c[o+"UserChanged"]??!1})}catch(c){console.error("Failed to load local data:",c)}}function _(t,n,e,i){for(let s=1;s<=31;s++)d(t,n,s,e,i)}function C(){const t=[];for(const n in sessionStorage)if(sessionStorage.hasOwnProperty(n))try{const e=JSON.parse(sessionStorage.getItem(n)||"{}");u.some(a=>e[a+"UserChanged"])&&t.push(n)}catch{continue}t.forEach(n=>sessionStorage.removeItem(n))}function R(t,n,e,i){return m(t,n,e.id)?e.ratownik&&N(t,n,i)?(l(r.TWO_RATOWNIK_ERROR,"red"),!1):!0:(l(r.DUPLICATE_SHIFT,"red"),!1)}function m(t,n,e){return n.includes("day")?t.dayShift1!==e&&t.dayShift2!==e:n.includes("night")?t.nightShift1!==e&&t.nightShift2!==e:!0}function N(t,n,e){let i=[];return n.includes("day")&&(i=[t.dayShift1,t.dayShift2].filter(Boolean)),n.includes("night")&&(i=[t.nightShift1,t.nightShift2].filter(Boolean)),i.some(a=>!!e.find(f=>f.id===a)?.ratownik)}function E(t,n,e){t[n]=e.id,t[`${n}Name`]=e.name,t[`${n}Ratownik`]=e.ratownik,t[`${n}UserChanged`]=!0}function I(t,n){t[n]=null,t[`${n}Name`]=r.NOT_ASSIGNED,t[`${n}Ratownik`]=null,t[`${n}UserChanged`]=!0}export{E as a,I as b,C as c,w as d,k as g,A as i,_ as l,O as s,R as v};
