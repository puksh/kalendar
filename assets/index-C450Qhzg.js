const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SideBarComponent-BFpGCMU7.js","assets/utils-BjyM4F9V.js","assets/vue-vendor-RtJloCyB.js","assets/utils-BloexXmG.css","assets/SideBarComponent-6T1-wk1U.css","assets/MonthSelector-CLKQqBoN.js","assets/MonthSelector-D4HXmIL7.css","assets/PeopleListWindow-D3kz8OeJ.js","assets/PeopleListWindow-C403BSN5.css","assets/ShiftCountWindow-CaILiGpq.js","assets/ShiftCountWindow-DqTG3PgE.css","assets/CalendarComponent-RcQkQ49R.js","assets/daysOfWeek-C19XqJ9X.js","assets/CalendarComponent-Blf4Plkk.css","assets/ExcelComponent-tTyL2416.js","assets/ExcelComponent-5e5LMwJW.css","assets/AuthorizationModal-CsnBhMkM.js","assets/AuthorizationModal-Cb8roPmR.css"])))=>i.map(i=>d[i]);
import{c as v,o as h,d as r,e as C,f as g,g as k,h as _,i as w,j as z,n as U,w as S,k as R,v as b,b as y,F as A,m as M,l as I}from"./vue-vendor-RtJloCyB.js";import{_ as D,a as E,c as N}from"./utils-BjyM4F9V.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))f(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&f(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function f(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}})();const O="modulepreload",j=function(n){return"/"+n},L={},c=function(t,a,f){let e=Promise.resolve();if(a&&a.length>0){let s=function(i){return Promise.all(i.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),P=l?.nonce||l?.getAttribute("nonce");e=s(a.map(i=>{if(i=j(i),i in L)return;L[i]=!0;const u=i.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":O,u||(d.as="script"),d.crossOrigin="",d.href=i,P&&d.setAttribute("nonce",P),document.head.appendChild(d),u)return new Promise((p,x)=>{d.addEventListener("load",p),d.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${i}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return e.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},T={},V={class:"refresh-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"};function B(n,t){return h(),v("svg",V,t[0]||(t[0]=[r("path",{d:"M23 4v6h-6"},null,-1),r("path",{d:"M1 20v-6h6"},null,-1),r("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"},null,-1),r("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"},null,-1)]))}const Y=D(T,[["render",B],["__scopeId","data-v-11885e2d"]]),F={name:"VueCalendar",components:{SideBarComponent:C(()=>c(()=>import("./SideBarComponent-BFpGCMU7.js"),__vite__mapDeps([0,1,2,3,4]))),MonthSelector:C(()=>c(()=>import("./MonthSelector-CLKQqBoN.js"),__vite__mapDeps([5,1,2,3,6]))),PeopleListWindow:C(()=>c(()=>import("./PeopleListWindow-D3kz8OeJ.js"),__vite__mapDeps([7,1,2,3,8]))),ShiftCountWindow:C(()=>c(()=>import("./ShiftCountWindow-CaILiGpq.js"),__vite__mapDeps([9,1,2,3,10]))),NotificationMessage:C(()=>c(()=>import("./utils-BjyM4F9V.js").then(n=>n.b),__vite__mapDeps([1,2,3]))),RefreshIcon:Y},data(){return{isEditingMode:this.safeGetFromStorage("isEditingMode",!1),selectedMonth:new Date().getMonth(),selectedYear:new Date().getFullYear(),locale:"pl",hasUnsavedChanges:!1,showPasswordModal:!1,localData:{},people:[{id:1,name:"Milena",ratownik:!1},{id:2,name:"Mikołaj",ratownik:!1},{id:3,name:"Aleksandra",ratownik:!1},{id:4,name:"Łukasz",ratownik:!0},{id:5,name:"Joanna",ratownik:!1},{id:6,name:"Natalia",ratownik:!0},{id:7,name:"Marcin",ratownik:!0}],monthDays:[],isRefreshing:!1,AuthorizationModal:null,CalendarComponent:null,ExcelComponent:null,currentPage:localStorage.getItem("currentPage")||"ExcelComponent"}},methods:{handleNavigation(n){this.hasUnsavedChanges&&!confirm("Masz niezapisane zmiany. Czy na pewno chcesz zmienić widok? Twoje zmiany zostaną utracone.")||(localStorage.setItem("currentPage",n),n==="CalendarComponent"&&!this.CalendarComponent?(this.isLoading=!0,c(()=>import("./CalendarComponent-RcQkQ49R.js"),__vite__mapDeps([11,12,1,2,3,13])).then(t=>{this.CalendarComponent=M(t.default),this.currentPage=n,this.hasUnsavedChanges=!1,this.isLoading=!1})):n==="ExcelComponent"&&!this.ExcelComponent?(this.isLoading=!0,c(()=>import("./ExcelComponent-tTyL2416.js"),__vite__mapDeps([14,12,1,2,3,15])).then(t=>{this.ExcelComponent=M(t.default),this.currentPage=n,this.hasUnsavedChanges=!1,this.isLoading=!1})):(this.currentPage=n,this.hasUnsavedChanges=!1))},handleMonthChange(n){this.selectedMonth+=n,this.selectedMonth>11?(this.selectedMonth=0,this.selectedYear+=1):this.selectedMonth<0&&(this.selectedMonth=11,this.selectedYear-=1)},discardChanges(){this.hasUnsavedChanges=!1,this.checkShiftDataSync()},generateCurrentView(){this.currentPage==="ExcelComponent"&&this.$refs.excelComponent?this.$refs.excelComponent.generateMonthDays():this.currentPage==="CalendarComponent"&&this.$refs.calendarComponent&&this.$refs.calendarComponent.generateMonthDays()},async checkShiftDataSync(){const n=setTimeout(()=>{this.isRefreshing&&(this.isRefreshing=!1,E("Odświeżanie przerwane - timeout","red"))},6e3);this.isRefreshing=!0;try{const t=N(()=>this.generateCurrentView());this.syncedChanges=await Promise.race([t,new Promise((a,f)=>setTimeout(()=>f(new Error("Sync timeout")),5e3))]),this.hasUnsavedChanges=!1}catch(t){E(`Błąd podczas odświeżania: ${t.message||"Unknown error"}`,"red")}finally{clearTimeout(n),setTimeout(()=>{this.isRefreshing=!1},800)}},updateEditingMode(n){this.isEditingMode=n,localStorage.setItem("isEditingMode",JSON.stringify(n))},updateUnsavedChanges(n){this.hasUnsavedChanges=n},showPasswordPrompt(){this.AuthorizationModal?this.showPasswordModal=!0:c(()=>import("./AuthorizationModal-CsnBhMkM.js"),__vite__mapDeps([16,1,2,3,17])).then(n=>{this.AuthorizationModal=M(n.default),this.showPasswordModal=!0})},handleAuthorization(){this.showPasswordModal=!1,this.hasUnsavedChanges=!1,this.$refs.activeComponent?.handleChangesSaved()},emitEditingMode(n){this.updateEditingMode(n)},updateMonthDays(n){this.monthDays=n},recoverFromError(){this.isRefreshing=!1,this.currentPage==="ExcelComponent"&&!this.$refs.excelComponent&&this.handleNavigation("ExcelComponent"),this.isLoading=!1},safeGetFromStorage(n,t){try{const a=localStorage.getItem(n);return a!==null?JSON.parse(a):t}catch{return t}}},async mounted(){try{if(this.isRefreshing=!1,!this.ExcelComponent)try{this.ExcelComponent=M((await c(async()=>{const{default:t}=await import("./ExcelComponent-tTyL2416.js");return{default:t}},__vite__mapDeps([14,12,1,2,3,15]))).default)}catch{E("Błąd ładowania Tabeli","red")}if(localStorage.getItem("currentPage")==="CalendarComponent"&&!this.CalendarComponent)try{const t=await c(()=>import("./CalendarComponent-RcQkQ49R.js"),__vite__mapDeps([11,12,1,2,3,13]));this.CalendarComponent=M(t.default)}catch{E("Błąd ładowania Kalendarza","red"),this.currentPage="ExcelComponent",localStorage.setItem("currentPage","ExcelComponent")}this.discardChanges(),this.hasUnsavedChanges=!1}catch{E("Błąd inicjalizacji aplikacji","red")}window.addEventListener("error",n=>{this.recoverFromError()}),window.addEventListener("unhandledrejection",n=>{this.recoverFromError()})},computed:{peopleListEditingMode(){switch(this.currentPage){case"CalendarComponent":return this.isEditingMode;case"ExcelComponent":return!1;default:return!1}}}},W={class:"app-container"},Z=["disabled"],H={class:"top-right-buttons compact-toggle",title:"Przełącz tryb edytowania"},K=["checked"],q=["aria-checked"],G={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"pencil-icon"},J={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"pencil-icon"},Q={class:"main-content"},X={key:0,class:"refresh-overlay"},$={style:{display:"flex","flex-direction":"column","align-items":"center"}},ee={class:"editing-mode-label"},te={class:"editing-mode-label"};function ne(n,t,a,f,e,o){const s=g("SideBarComponent"),l=g("MonthSelector"),P=g("refresh-icon"),i=g("RefreshIcon"),u=g("PeopleListWindow"),m=g("ShiftCountWindow"),d=g("NotificationMessage");return h(),v(A,null,[r("div",W,[e.AuthorizationModal&&e.showPasswordModal?(h(),k(z(e.AuthorizationModal),{key:0,show:e.showPasswordModal,onClose:t[0]||(t[0]=p=>e.showPasswordModal=!1),onAuthorized:o.handleAuthorization,"aria-label":"Zapisz zmiany",title:"Zapisz zmiany w harmonogramie"},null,40,["show","onAuthorized"])):_("",!0),r("button",{disabled:!e.hasUnsavedChanges,onClick:t[1]||(t[1]=(...p)=>o.showPasswordPrompt&&o.showPasswordPrompt(...p)),class:"submit-button","aria-label":"Zapisz zmiany",title:"Zapisz zmiany w harmonogramie"}," Zapisz ",8,Z),w(s,{currentComponent:e.currentPage,onNavigate:o.handleNavigation},null,8,["currentComponent","onNavigate"]),w(l,{currentMonth:e.selectedMonth,currentYear:e.selectedYear,locale:e.locale,hasUnsavedChanges:e.hasUnsavedChanges,onChangeMonth:o.handleMonthChange,onDiscardChanges:o.discardChanges},null,8,["currentMonth","currentYear","locale","hasUnsavedChanges","onChangeMonth","onDiscardChanges"]),r("section",null,[r("button",{class:"top-right-buttons buttonRefresh",onClick:t[2]||(t[2]=p=>o.checkShiftDataSync()),"aria-label":"Odśwież harmonogram",title:"Odśwież harmonogram"},[w(P,{class:U({refreshing:e.isRefreshing})},null,8,["class"])]),r("label",H,[r("input",{type:"checkbox",checked:e.isEditingMode,onChange:t[3]||(t[3]=p=>o.emitEditingMode(p.target.checked)),"aria-label":"Przełącz tryb edytowania"},null,40,K),r("span",{class:"slider",role:"switch","aria-checked":e.isEditingMode},[e.isEditingMode?(h(),v("svg",J,t[5]||(t[5]=[r("path",{d:"M12 20h9"},null,-1),r("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},null,-1)]))):(h(),v("svg",G,t[4]||(t[4]=[r("path",{d:"M12 20h9"},null,-1),r("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},null,-1)])))],8,q)])]),r("main",Q,[e.isRefreshing?(h(),v("div",X,[w(i,{class:"centered-refresh-icon refreshing"})])):_("",!0),r("div",{style:R({opacity:e.isRefreshing?"0.5":"1"})},[e.currentPage==="CalendarComponent"?(h(),k(z(e.CalendarComponent),{key:0,ref:"calendarComponent",isEditingMode:e.isEditingMode,selectedMonth:e.selectedMonth,selectedYear:e.selectedYear,people:e.people,onUpdateEditingMode:o.updateEditingMode,onHasChanges:o.updateUnsavedChanges,onMonthDaysUpdated:o.updateMonthDays},null,40,["isEditingMode","selectedMonth","selectedYear","people","onUpdateEditingMode","onHasChanges","onMonthDaysUpdated"])):_("",!0),e.currentPage==="ExcelComponent"?(h(),k(z(e.ExcelComponent),{key:1,ref:"excelComponent",isEditingMode:e.isEditingMode,selectedMonth:e.selectedMonth,selectedYear:e.selectedYear,people:e.people,onUpdateEditingMode:o.updateEditingMode,onHasChanges:o.updateUnsavedChanges,onMonthDaysUpdated:o.updateMonthDays},null,40,["isEditingMode","selectedMonth","selectedYear","people","onUpdateEditingMode","onHasChanges","onMonthDaysUpdated"])):_("",!0)],4),w(u,{people:e.people,isEditingMode:o.peopleListEditingMode},null,8,["people","isEditingMode"]),S(r("div",$,[S(r("h1",ee,t[6]||(t[6]=[y(" Tryb edytowania "),r("a",{style:{color:"#4caf50"}},"Włączony",-1),r("br",null,null,-1),y(" Przeciągaj członków zespołu na miejsca w grafiku."),r("br",null,null,-1),y("Kliknij na zajętą zmianę, aby ją wyczyścić. ")]),512),[[b,e.currentPage==="CalendarComponent"]]),S(r("h1",te,t[7]||(t[7]=[y(" Tryb edytowania "),r("a",{style:{color:"#4caf50"}},"Włączony",-1),r("br",null,null,-1),y(" Kliknij na miejsce w tabeli, aby wybrać zmianę. ")]),512),[[b,e.currentPage==="ExcelComponent"]])],512),[[b,e.isEditingMode]]),e.monthDays.length>0&&e.localData[1]!==null?(h(),k(m,{key:1,ref:"shiftCountWindow",people:e.people,monthDays:e.monthDays},null,8,["people","monthDays"])):_("",!0),w(d)])]),t[8]||(t[8]=r("footer",{class:"footer"},[r("p",null,"© 2025 puksh - All rights reserved")],-1))],64)}const oe=D(F,[["render",ne],["__scopeId","data-v-851a94d4"]]);window.addEventListener("error",n=>{n.error&&(n.error.message.includes("Failed to fetch dynamically imported module")||n.error.message.includes("Importing a module script failed"))&&window.location.reload()});I(oe).mount("#app");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(n=>{}).catch(n=>{})});export{c as _};
