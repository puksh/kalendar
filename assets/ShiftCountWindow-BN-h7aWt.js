const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthorizationModal-CwY7jOFj.js","assets/utils-BO-MB2ZG.js","assets/vue-vendor-RF0o26Ul.js","assets/utils-BWm1wYfN.css","assets/AuthorizationModal-bqQnogzt.css"])))=>i.map(i=>d[i]);
import{_ as w}from"./index-Bh3aL0ht.js";import{_ as g}from"./utils-BO-MB2ZG.js";import{c as u,o as i,d as e,k as d,f as h,b as c,t as n,n as y,l as S,T as _,F as f,a as m}from"./vue-vendor-RF0o26Ul.js";const k={name:"ShiftCountWindow",props:{people:{type:Array,required:!0},monthDays:{type:Array,required:!0}},data(){return{showSalaries:!1,showPasswordModal:!1,AuthorizationModal:null,salaryRates:{ratownik:90,nurse:97}}},async mounted(){this.calculateAllShiftCounts();try{const s=await w(()=>import("./AuthorizationModal-CwY7jOFj.js"),__vite__mapDeps([0,1,2,3,4]));this.AuthorizationModal=s.default}catch(s){console.error("Failed to load AuthorizationModal:",s)}},methods:{countShiftsForPerson(s){if(!s)return 0;let t=0;for(let a=0;a<this.monthDays.length;a++)this.monthDays[a].dayShift1===s&&(t+=1),this.monthDays[a].dayShift2===s&&(t+=1),this.monthDays[a].nightShift1===s&&(t+=1),this.monthDays[a].nightShift2===s&&(t+=1);return t},calculateAllShiftCounts(){this.people.forEach(s=>{s.shiftCount=this.countShiftsForPerson(s.id)})},calculateNetto(s,t){if(!this.showSalaries)return 0;let a=0;return t?a=s*12*this.salaryRates.ratownik:a=s*12*this.salaryRates.nurse,a},getTotalSalary(s){return this.people.filter(t=>t.ratownik===s).reduce((t,a)=>t+this.calculateNetto(a.shiftCount||0,s),0)},formatCurrency(s){return new Intl.NumberFormat("pl-PL",{minimumFractionDigits:0,maximumFractionDigits:2}).format(s)},toggleSalaryView(){this.showSalaries?this.showSalaries=!1:this.showPasswordModal=!0},handleSalaryAuthorization(){this.showSalaries=!0,this.showPasswordModal=!1}},watch:{monthDays:{handler(){this.calculateAllShiftCounts()},deep:!0}}},z={class:"columns-container"},C={class:"column"},p={style:{margin:"8px",display:"inline-flex","align-items":"center",gap:"4px"}},A={key:0,style:{color:"var(--color-success) !important"}},x={class:"shift-counts"},v={key:0,class:"salary-info"},P={class:"column"},M={style:{margin:"8px",display:"inline-flex","align-items":"center",gap:"4px"}},D={key:0,style:{color:"var(--color-success) !important"}},T={class:"shift-counts"},b={key:0,class:"salary-info"},F={key:0,class:"salary-summary"},N={class:"total-all"};function V(s,t,a,R,r,l){return i(),u("section",{class:y(["shift-counts-window",{"show-salaries":r.showSalaries}])},[t[6]||(t[6]=e("h3",{style:{margin:"8px"}},"Ilość zmian",-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>l.toggleSalaryView&&l.toggleSalaryView(...o)),class:y(["salary-toggle-btn",{active:r.showSalaries}])},[t[2]||(t[2]=e("svg",{class:"dollar-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{x:"2",y:"7",width:"20",height:"10",rx:"2",stroke:"currentColor","stroke-width":"2"}),e("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"}),e("path",{d:"M12 10.5V13.5M10.5 12H13.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),c(" "+n(r.showSalaries?"Ukryj wynagrodzenia":"Pokaż wynagrodzenia"),1)],2),(i(),d(_,{to:"body"},[r.AuthorizationModal&&r.showPasswordModal?(i(),d(S(r.AuthorizationModal),{key:0,show:r.showPasswordModal,onClose:t[1]||(t[1]=o=>r.showPasswordModal=!1),onAuthorized:l.handleSalaryAuthorization,"aria-label":"Autoryzuj dostęp do wynagrodzeń",title:"Wprowadź hasło aby zobaczyć wynagrodzenia",mode:"salary"},null,40,["show","onAuthorized"])):h("",!0)])),e("div",z,[e("div",C,[e("h4",p,[t[3]||(t[3]=c(" Ratowniczki/cy ")),r.showSalaries?(i(),u("p",A," | "+n(r.salaryRates.ratownik)+" / godz. ",1)):h("",!0)]),e("ul",x,[(i(!0),u(f,null,m(a.people.filter(o=>o.ratownik),o=>(i(),u("li",{key:o.id,class:"shift-count-item"},[c(n(o.name)+": ",1),e("strong",null,n(o.shiftCount||0),1),r.showSalaries?(i(),u("span",v," | "+n(l.formatCurrency(l.calculateNetto(o.shiftCount||0,!0)))+" zł netto ",1)):h("",!0)]))),128))])]),e("div",P,[e("h4",M,[t[4]||(t[4]=c(" Pielęgniarki/rze ")),r.showSalaries?(i(),u("p",D," | "+n(r.salaryRates.nurse)+" / godz. ",1)):h("",!0)]),e("ul",T,[(i(!0),u(f,null,m(a.people.filter(o=>!o.ratownik),o=>(i(),u("li",{key:o.id,class:"shift-count-item"},[c(n(o.name)+": ",1),e("strong",null,n(o.shiftCount||0),1),r.showSalaries?(i(),u("span",b," | "+n(l.formatCurrency(l.calculateNetto(o.shiftCount||0,!1)))+" zł netto ",1)):h("",!0)]))),128))])])]),r.showSalaries?(i(),u("div",F,[t[5]||(t[5]=e("h4",null,"Podsumowanie miesięczne:",-1)),e("p",null,[e("strong",null,"Ratownicy łącznie: "+n(l.formatCurrency(l.getTotalSalary(!0)))+" zł netto",1)]),e("p",null,[e("strong",null,"Pielęgniarki łącznie: "+n(l.formatCurrency(l.getTotalSalary(!1)))+" zł netto",1)]),e("p",N,[e("strong",null,"SUMA CAŁKOWITA: "+n(l.formatCurrency(l.getTotalSalary(!0)+l.getTotalSalary(!1)))+" zł netto",1)])])):h("",!0)],2)}const L=g(k,[["render",V],["__scopeId","data-v-dfc0f2bd"]]);export{L as default};
