import{_ as P,N as E,a as f}from"./utils-BV2iPCIX.js";import{o as l,c as a,d,F as g,a as u,n as h,q as m,t as c}from"./vue-vendor-BNAjV1iG.js";const v={name:"PeopleListWindow",props:{people:{type:Array,required:!0},isEditingMode:{type:Boolean,required:!0}},components:{NotificationMessage:E},data(){return{draggedPerson:null,touchedPerson:null,touchStartTime:0,touchTimer:null,isDragging:!1}},methods:{startDrag(n){localStorage.setItem("draggedPerson",JSON.stringify(n))},handleDragEnd(){localStorage.removeItem("draggedPerson")},handlePointerDown(n,e){n.pointerType==="touch"&&(this.touchStartTime=Date.now(),this.touchedElement=n.currentTarget,this.touchedPerson=e,this.touchedElement.setPointerCapture(n.pointerId),this.touchTimer=setTimeout(()=>{this.isDragging=!0,localStorage.setItem("draggedPerson",JSON.stringify(e)),this.touchedElement.classList.add("being-touched"),navigator.vibrate&&navigator.vibrate(50),f(`Przeciągnij ${e.name} na slot`,"green")},500))},handlePointerMove(n){n.pointerType==="touch"&&(this.touchTimer&&(clearTimeout(this.touchTimer),this.touchTimer=null),!(!this.isDragging||!this.touchedElement)&&n.preventDefault())},handlePointerUp(n){n.pointerType==="touch"&&(this.touchTimer&&(clearTimeout(this.touchTimer),this.touchTimer=null),this.touchedElement&&(this.touchedElement.releasePointerCapture(n.pointerId),this.touchedElement.classList.remove("being-touched")),this.isDragging=!1,this.touchedElement=null,this.touchedPerson=null)},handlePointerCancel(n){this.handlePointerUp(n),localStorage.removeItem("draggedPerson")}}},D={class:"people-list"},M={class:"person-lists"},b=["draggable","onDragstart","onPointerdown"],T={class:"person-lists"},y=["draggable","onDragstart","onPointerdown"];function w(n,e,t,k,s,o){return l(),a("section",D,[e[9]||(e[9]=d("h3",{style:{"font-weight":"bold"}},"Zespół",-1)),d("div",null,[e[7]||(e[7]=d("h4",null,"Ratowniczki/cy",-1)),d("div",M,[(l(!0),a(g,null,u(t.people.filter(i=>i.ratownik),i=>(l(),a("div",{key:i.id,class:h(["person-item ratownik",{draggable:t.isEditingMode,"being-touched":s.touchedPerson?.id===i.id}]),style:m({borderRadius:t.isEditingMode?"var(--border-radius)":"0"}),draggable:t.isEditingMode,onDragstart:r=>t.isEditingMode?o.startDrag(i):null,onDragend:e[0]||(e[0]=(...r)=>o.handleDragEnd&&o.handleDragEnd(...r)),onPointerdown:r=>t.isEditingMode?o.handlePointerDown(r,i):null,onPointermove:e[1]||(e[1]=r=>t.isEditingMode?o.handlePointerMove:null),onPointerup:e[2]||(e[2]=r=>t.isEditingMode?o.handlePointerUp:null),onPointercancel:e[3]||(e[3]=r=>t.isEditingMode?o.handlePointerCancel:null)},c(i.name),47,b))),128))]),e[8]||(e[8]=d("h4",null,"Pielęgniarki/rze",-1)),d("div",T,[(l(!0),a(g,null,u(t.people.filter(i=>!i.ratownik),i=>(l(),a("div",{key:i.id,class:h(["person-item pielegniarka",{draggable:t.isEditingMode,"being-touched":s.touchedPerson?.id===i.id}]),style:m({borderRadius:t.isEditingMode?"var(--border-radius)":"0"}),draggable:t.isEditingMode,onDragstart:r=>t.isEditingMode?o.startDrag(i):null,onPointerdown:r=>t.isEditingMode?o.handlePointerDown(r,i):null,onPointermove:e[4]||(e[4]=r=>t.isEditingMode?o.handlePointerMove:null),onPointerup:e[5]||(e[5]=r=>t.isEditingMode?o.handlePointerUp:null),onPointercancel:e[6]||(e[6]=r=>t.isEditingMode?o.handlePointerCancel:null)},c(i.name),47,y))),128))])])])}const C=P(v,[["render",w],["__scopeId","data-v-01785cc8"]]);export{C as default};
