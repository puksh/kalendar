import{r as p,c as l,o as d,F as S,a as _,n as v,b as k,d as r,t as N}from"./vue-vendor-RtJloCyB.js";const c=p([]);let C=0;const u=(t,e="blue",s=3e3)=>{const o=C++;c.push({id:o,message:t,type:e}),setTimeout(()=>{m(o)},s)},m=t=>{const e=c.findIndex(s=>s.id===t);e!==-1&&c.splice(e,1)},b={name:"NotificationMessage",setup(){return{notifications:c,removeNotification:m}}},x=(t,e)=>{const s=t.__vccOpts||t;for(const[o,n]of e)s[o]=n;return s},O={class:"notification-container"},w=["onClick"];function I(t,e,s,o,n,f){return d(),l("div",O,[(d(!0),l(S,null,_(o.notifications,a=>(d(),l("div",{key:a.id,class:v(["notification",a.type])},[k(N(a.message)+" ",1),r("button",{onClick:i=>o.removeNotification(a.id),"aria-label":"Close notification"},e[0]||(e[0]=[r("svg",{viewBox:"0 0 24 24",width:"14",height:"14",stroke:"currentColor","stroke-width":"2"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,w)],2))),128))])}const j=x(b,[["render",I],["__scopeId","data-v-ef1d7c4a"]]),E=Object.freeze(Object.defineProperty({__proto__:null,addNotification:u,default:j,removeNotification:m},Symbol.toStringTag,{value:"Module"}));async function T(t){try{const e=await fetch("https://mc.kot.li/?key=shiftData.json",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw e.status===404&&u("Brak danych na serwerze","red"),new Error(`Failed to fetch data from server: ${e.status}`);return await e.json()}catch{return u("Nie udało się połączyć z serwerem","red"),null}}async function J(t){z();const e=await T();if(!e)return;const s={};for(const[o,n]of Object.entries(e)){const f=localStorage.getItem(o),a=f?JSON.parse(f):null,i={};if(!a)s[o]={...n},localStorage.setItem(o,JSON.stringify(n));else{for(const[y,g]of Object.entries(n)){const h=a[y]||null;h!==g&&(i[y]={from:h||"Empty",to:g||"Empty"})}Object.keys(i).length>0&&(s[o]=i),localStorage.setItem(o,JSON.stringify(n))}}return typeof t=="function"&&t(),sessionStorage.setItem("syncedChanges",JSON.stringify(s)),setTimeout(()=>{sessionStorage.removeItem("syncedChanges")},5e3),s}function z(){const t=sessionStorage.getItem("syncedChanges");if(t){const e=JSON.parse(t);return setTimeout(()=>{sessionStorage.removeItem("syncedChanges")},5e3),e}return{}}export{j as N,x as _,u as a,E as b,J as c,z as r};
