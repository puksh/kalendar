const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthorizationModal-Cgih2am2.js","assets/index-gQSDQXdt.js","assets/vue-vendor-B4onvSGr.js","assets/utils-_oi8IqBs.js","assets/utils-BWm1wYfN.css","assets/index-B6nBulMw.css","assets/AuthorizationModal-BiYznelC.css"])))=>i.map(i=>d[i]);
import{_ as g}from"./index-gQSDQXdt.js";import{_ as S}from"./utils-_oi8IqBs.js";import{c as u,o as i,d as o,i as f,e as h,b as d,t as n,n as y,k as z,T as C,F as m,a as w}from"./vue-vendor-B4onvSGr.js";const k={name:"ShiftCountWindow",props:{people:{type:Array,required:!0},monthDays:{type:Array,required:!0}},data(){return{showSalaries:!1,showPasswordModal:!1,AuthorizationModal:null,salaryRates:{ratownik:70,nurse:107}}},async mounted(){this.calculateAllShiftCounts();try{const s=await g(()=>import("./AuthorizationModal-Cgih2am2.js"),__vite__mapDeps([0,1,2,3,4,5,6]));this.AuthorizationModal=s.default}catch(s){console.error("Failed to load AuthorizationModal:",s)}},methods:{countShiftsForPerson(s){if(!s)return 0;let t=0;for(let l=0;l<this.monthDays.length;l++)this.monthDays[l].dayShift1===s&&(t+=1),this.monthDays[l].dayShift2===s&&(t+=1),this.monthDays[l].nightShift1===s&&(t+=1),this.monthDays[l].nightShift2===s&&(t+=1);return t},calculateAllShiftCounts(){this.people.forEach(s=>{s.shiftCount=this.countShiftsForPerson(s.id)})},calculateBrutto(s,t){if(!this.showSalaries)return 0;const l=this.people.find(e=>e.shiftCount===s)?.id,c=this.countShiftsForPerson(l);let a=0;return t?a=c*12*this.salaryRates.ratownik:a=c*12*this.salaryRates.nurse,a},getTotalSalary(s){return this.people.filter(t=>t.ratownik===s).reduce((t,l)=>t+this.calculateBrutto(l.shiftCount||0,s),0)},formatCurrency(s){return new Intl.NumberFormat("pl-PL",{minimumFractionDigits:0,maximumFractionDigits:2}).format(s)},toggleSalaryView(){this.showSalaries?this.showSalaries=!1:this.showPasswordModal=!0},handleSalaryAuthorization(){this.showSalaries=!0,this.showPasswordModal=!1}},watch:{monthDays:{handler(){this.calculateAllShiftCounts()},deep:!0}}},_={class:"columns-container"},p={class:"column"},A={class:"shift-counts"},P={key:0,class:"salary-info"},M={class:"column"},v={class:"shift-counts"},x={key:0,class:"salary-info"},D={key:0,class:"salary-summary"},T={class:"total-all"};function b(s,t,l,c,a,e){return i(),u("section",{class:y(["shift-counts-window",{"show-salaries":a.showSalaries}])},[t[6]||(t[6]=o("h3",{style:{margin:"8px"}},"Ilość zmian",-1)),o("button",{onClick:t[0]||(t[0]=(...r)=>e.toggleSalaryView&&e.toggleSalaryView(...r)),class:y(["salary-toggle-btn",{active:a.showSalaries}])},[t[2]||(t[2]=o("svg",{class:"dollar-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("rect",{x:"2",y:"7",width:"20",height:"10",rx:"2",stroke:"currentColor","stroke-width":"2"}),o("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"}),o("path",{d:"M12 10.5V13.5M10.5 12H13.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),d(" "+n(a.showSalaries?"Ukryj wynagrodzenia":"Pokaż wynagrodzenia"),1)],2),(i(),f(C,{to:"body"},[a.AuthorizationModal&&a.showPasswordModal?(i(),f(z(a.AuthorizationModal),{key:0,show:a.showPasswordModal,onClose:t[1]||(t[1]=r=>a.showPasswordModal=!1),onAuthorized:e.handleSalaryAuthorization,"aria-label":"Autoryzuj dostęp do wynagrodzeń",title:"Wprowadź hasło aby zobaczyć wynagrodzenia",mode:"salary"},null,40,["show","onAuthorized"])):h("",!0)])),o("div",_,[o("div",p,[t[3]||(t[3]=o("h4",{style:{margin:"8px"}},"Ratowniczki/cy",-1)),o("ul",A,[(i(!0),u(m,null,w(l.people.filter(r=>r.ratownik),r=>(i(),u("li",{key:r.id,class:"shift-count-item"},[d(n(r.name)+": ",1),o("strong",null,n(r.shiftCount||0),1),a.showSalaries?(i(),u("span",P," | "+n(e.formatCurrency(e.calculateBrutto(r.shiftCount||0,!0)))+" zł brutto ",1)):h("",!0)]))),128))])]),o("div",M,[t[4]||(t[4]=o("h4",{style:{margin:"8px"}},"Pielęgniarki/rze",-1)),o("ul",v,[(i(!0),u(m,null,w(l.people.filter(r=>!r.ratownik),r=>(i(),u("li",{key:r.id,class:"shift-count-item"},[d(n(r.name)+": ",1),o("strong",null,n(r.shiftCount||0),1),a.showSalaries?(i(),u("span",x," | "+n(e.formatCurrency(e.calculateBrutto(r.shiftCount||0,!0)))+" zł brutto ",1)):h("",!0)]))),128))])])]),a.showSalaries?(i(),u("div",D,[t[5]||(t[5]=o("h4",null,"Podsumowanie miesięczne:",-1)),o("p",null,[o("strong",null,"Ratownicy łącznie: "+n(e.formatCurrency(e.getTotalSalary(!0)))+" zł netto",1)]),o("p",null,[o("strong",null,"Pielęgniarki łącznie: "+n(e.formatCurrency(e.getTotalSalary(!1)))+" zł netto",1)]),o("p",T,[o("strong",null,"SUMA CAŁKOWITA: "+n(e.formatCurrency(e.getTotalSalary(!0)+e.getTotalSalary(!1)))+" zł netto",1)])])):h("",!0)],2)}const R=S(k,[["render",b],["__scopeId","data-v-29726920"]]);export{R as default};
